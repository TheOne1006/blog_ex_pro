"use strict";var ngApp;ngApp=angular.module("theOneBlog",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ui.router","ui.bootstrap","ngSanitize","ngTouch","theOneBlog.directives","theOneBlog.filters","theOneBlog.services","theOneBlog.route","theOneBlog.controllers","mgcrea.ngStrap","angular-carousel","angularMermaid"]).config(["$httpProvider",function(a){a.defaults.cache=false}]).factory("browserHelp",["$window",function(a){var b=a.innerWidth,c=768;var d=180;return{isMobile:b<c,defultContentWidth:d}}]);angular.module("theOneBlog.directives",[]);angular.module("theOneBlog.filters",[]);angular.module("theOneBlog.services",["ngResource"]);angular.module("theOneBlog.route",["ui.router"]);angular.module("theOneBlog.controllers",["theOneBlog.services"]);"use strict";angular.module("theOneBlog.directives").directive("compileHtml",["$compile",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(function(a){return a.$eval(d.compileHtml)},function(d){c.html(d);a(c.contents())(b)})}}}]);"use strict";angular.module("theOneBlog.directives").directive("prettyprint",["$window",function(a){return{restrict:"C",link:function b(c,d){var e=a.prettyPrintOne;if(e&&angular.isFunction(e)){d.html(e(d.html(),"",true))}}}}]);"use strict";angular.module("theOneBlog.directives").directive("scrollAnimate",[function(){return{restrict:"A",link:function(a,b,c){var d=c.target;b.bind("click",function(a){a.stopPropagation();var b=angular.element(d),c=b.offset()&&b.offset().top;if(c){angular.element("body").animate({scrollTop:c})}})}}}]);"use strict";angular.module("theOneBlog.filters").filter("ArticlesByCateWordLimit",["browserHelp",function(a){var b=a.defultContentWidth;function c(a,b){if(a.length>b){return a.slice(0,b)+"..."}return a}return function(a,d){var e=a.length;if(!d||isNaN(d)){d=b}if(e===0){return a}angular.forEach(a,function(b,e){a[e].contentText=c(b.contentText,d)});return a}}]);"use strict";angular.module("theOneBlog.filters").filter("IndexArticlesWordlimit",["browserHelp",function(a){var b=a.defultContentWidth;function c(a,b){if(a.length>b){return a.slice(0,b)+"..."}return a}return function(a,d){var e=a.length;if(!d||isNaN(d)){d=b}if(e===0){return a}angular.forEach(a,function(b,e){if(angular.isArray(b.topArticles)&&b.topArticles.length>0){for(var f=b.topArticles.length-1;f>=0;f--){a[e].topArticles[f].contentText=c(b.topArticles[f].contentText,d)}}});return a}}]);"use strict";angular.module("theOneBlog.filters").filter("keyWordPoint",["$filter",function(a){return function(b,c){if(!angular.isArray(b)){return b}if(b.length===0){return[]}angular.forEach(b,function(d,e){b[e].title=a("keyordEm")(d.title,"title",c);b[e].contentText=a("keyordEm")(d.contentText,"content",c);angular.forEach(d.keyWords,function(d,f){b[e].keyWords[f]=a("keyordEm")(d,"tag",c)})});return b}}]);"use strict";angular.module("theOneBlog.filters").filter("keyordEm",["browserHelp",function(a){var b="<em>",c="</em>",d=a.defultContentWidth,e;function f(a,d){if(a.toLowerCase()===d.toLowerCase()){return b+a+c}return a}function g(a,d,f){var g=-1;e=new RegExp(d,"i");g=a.search(e);if(f){a=h(a,g,f)}if(g!==-1){return a.replace(e,b+"$&"+c)}return a}function h(a,b,c){var d=a.length,e;if(d<=c){return a}e=Math.floor(c/2);if(b-e<=0){return a.slice(0,c)+"..."}else if(b+e>=d){return"..."+a.slice(-c)}else{return"..."+a.slice(b-e,b+e)+"..."}}return function(a,b,c,e){if(c===undefined){return a}if(!e||isNaN(e)){e=d}switch(b){case"tag":a=f(a,c);break;case"title":a=g(a,c);break;case"content":a=g(a,c,e);break;default:break}return a}}]);"use strict";angular.module("theOneBlog.filters").filter("cateContain",[function(){return function(a){var b=[];if(!angular.isArray(a)){return b}angular.forEach(a,function(a){if(a.cate&&a.cate._id){for(var c=0;c<b.length;c++){if(a.cate._id===b[c]._id){b[c].resultNum++;return}}a.cate.resultNum=1;b.push(a.cate);return}});return b}}]);"use strict";angular.module("theOneBlog.services").factory("catesService",["$resource","$q",function(a,b){var c=[],d=a("/api/cates/all",null,{timeout:2e4});var e=function(){return d.query(null,function(a){if(a.length>0){c=a}})};return{getAllCates:function(){if(c!==undefined&&c.length!==0){var a=b.defer();a.resolve(c);return{$promise:a.promise}}else{return e()}}}}]);"use strict";angular.module("theOneBlog.services").factory("carouselsService",["$q","$resource",function(a,b){var c=[],d=b("/api/carousels",{},{timeout:2e4});var e=function(){return d.query({},function(a){if(a.length>0){c=a}})};return{getIndexList:function(){if(angular.isArray(c)&&c.length>0){var b=a.defer();b.resolve(c);return{$promise:b.promise}}return e()}}}]);"use strict";angular.module("theOneBlog.services").factory("indexArticlesService",["$resource","$q",function(a,b){var c=[],d=a("/home/index/list",{},{timeout:2e4});function e(){return d.query({},function(a){if(a.length>0){c=a}})}return{getList:function(){if(c!==undefined&&c.length!==0){var a=b.defer();a.resolve(c);return{$promise:a.promise}}return e()}}}]);"use strict";angular.module("theOneBlog.services").factory("articlesService",["$resource",function(a){var b=[],c="",d=a("/api/articles/:cateId",{},{queryByCateAlias:{url:"/api/articlesByCateAlias/:cateAlias",method:"get",params:{page:1,limit:12},isArray:false},countByCateId:{url:"/api/cate/articlesCount/:cateId",method:"get",isAarray:false}});var e=function(a,b){return d.queryByCateAlias({cateAlias:a,page:b},function(a){})};var f=function(a){return d.countByCateId({cateId:a},function(a){})};return{getArticlesByCateAliasList:function(a,b){return e(a,b)},getArticlesByIdCount:function(a){return f(a)}}}]);"use strict";angular.module("theOneBlog.services").factory("articleService",["$resource","$q",function(a,b){var c,d=a("/api/article/:id",{id:"@id"});var e=function(a){return d.get({id:a},function(a){c=a})};return{getById:function(a){if(c!==undefined&&c._id===a){var d=b.defer();d.resolve(c);return{$promise:d.promise}}return e(a)}}}]);"use strict";angular.module("theOneBlog.services").factory("searchService",["$resource",function(a){var b,c=a("/api/search/articles/:keyWord");var d=function(a){return c.query({keyWord:a},function(a){console.log(a)})};return{getListByKeyWord:function(a){return d(a)}}}]);"use strict";angular.module("theOneBlog.services").factory("headerHelp",[function(){var a=angular.element("title"),b=angular.element("meta[name=description]"),c=angular.element("meta[name=keywords]"),d,e,f;var g=function(){return a.text()};var h=function(){return b.attr("content")};var i=function(){return c.attr("content")};d=g();e=h();f=i();function j(b){var c;if(b!==""&&angular.isString(b)){a.text(b)}else{c=g();if(c!==d){a.text(d)}}return true}function k(a){var c;if(a!==""&&angular.isString(a)){b.attr("content",a)}else{c=h();if(c!==e){b.attr("content",e)}}return true}function l(a){var b;if(a!==""&&angular.isString(a)){c.attr("content",a)}else{b=i();if(b!==f){c.attr("content",f)}}return true}return{changeTitle:j,changeDescription:k,changekeyWord:l,resetAll:function(){var j=g(),k=h(),l=i();if(j!==d){a.text(d)}if(k!==e){b.attr("content",e)}if(l!==f){c.attr("content",e)}},init:function(){}}}]);"use strict";angular.module("theOneBlog").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){c.html5Mode({enabled:true,requireBase:false});a.state("main",{"abstract":true,url:"",views:{"@":{templateUrl:"/angular/views/home/main.html",controller:"mainCtrl"},"header@main":{templateUrl:"/angular/views/home/header.html",controller:"headerCtrl"}}}).state("main.index",{url:"/",views:{banner:{templateUrl:"/angular/views/home/banner.html",controller:"indexCarouselCtrl"},bodyer:{templateUrl:"/angular/views/home/main.content.html",controller:"indexArticlesCtrl"},"affix@main.index":{templateUrl:"/angular/views/home/affix.html",controller:"indexAffixCtrl"}},resolve:{indexList:["indexArticlesService",function(a){return a.getList().$promise}]}}).state("main.cate",{url:"/cate/:cateAlias/:page",views:{banner:{templateUrl:"/angular/views/home/article/article.banner.html"},bodyer:{templateUrl:"/angular/views/home/articles/articles.list.html",controller:"articlesCtrl"}},resolve:{articlesByCateName:["$stateParams","articlesService",function(a,b){var c=!a.page?"1":a.page,d=a.cateAlias;return b.getArticlesByCateAliasList(d,c).$promise}],totalNum:["articlesByCateName","articlesService",function(a,b){return b.getArticlesByIdCount(a.cate._id).$promise}]}}).state("main.article",{"abstract":true,url:"/article",views:{banner:{templateUrl:"/angular/views/home/article/article.banner.html"}}}).state("main.article.single",{url:"/id/:articleId",views:{"bodyer@main":{templateUrl:"/angular/views/home/article/article.html",controller:"articleCtrl"}},resolve:{article:["$stateParams","articleService",function(a,b){return b.getById(a.articleId).$promise}]}}).state("main.search",{"abstract":true,url:"/search",views:{banner:{templateUrl:"/angular/views/home/article/article.banner.html"}}}).state("main.search.goanything",{url:"/:searchWord",views:{"bodyer@main":{templateUrl:"/angular/views/home/search/search.bodyer.html",controller:"searchCtrl"}}});b.otherwise("/")}]);"use strict";angular.module("theOneBlog.controllers").controller("articleBannerCtrl",["$scope","$window",function(a,b){var c=b.Vivus;var d=new c("vivusTheOne",{type:"scenario-sync",duration:"20",start:"autostart",dashGap:"20",forceRender:true,file:"/public/svg/theoneIo.svg"});a.vireset=function(){d.reset().play()}}]);"use strict";angular.module("theOneBlog.controllers").controller("articleCtrl",["$scope","$filter","headerHelp","articleService","article",function(a,b,c,d,e){c.changeTitle(e.title);c.changeDescription(e.descript);c.changekeyWord(e.keyWords.join(","));a.pageClass="article";e.updateTime=b("date")(e.updateTime,"yyyy-MM-dd");a.article=e}]);"use strict";angular.module("theOneBlog.controllers").controller("articlesCtrl",["$scope","$filter","$location","headerHelp","articlesService","articlesByCateName","totalNum",function(a,b,c,d,e,f,g){d.changeTitle(f.cate.name);d.changeDescription();d.changekeyWord();a.articleList=b("ArticlesByCateWordLimit")(f.articleList);a.cate=f.cate;a.currentPage=f.curPage;a.articlesTotal=g.total;a.pageNav={maxSize:5,itemsPerPage:12,bigTotalItems:a.articlesTotal,curPage:a.currentPage,pageChang:function(){c.path("/cate/"+a.cate.alias+"/"+a.currentPage,false)}}}]);"use strict";angular.module("theOneBlog.controllers").controller("headerCtrl",["$scope","$location","catesService",function(a,b,c){a.cateList=[];c.getAllCates().$promise.then(function(b){a.cateList=b});a.search={keyWord:""};a.headerView={isCollapsed:false};a.changeCollapsed=function(){a.headerView.isCollapsed=!a.headerView.isCollapsed};a.goSearch=function(){if(!a.search.keyWord){return}b.path("/search/"+a.search.keyWord)}}]);"use strict";angular.module("theOneBlog.controllers").controller("indexAffixCtrl",["$scope","indexList",function(a,b){a.cates=b}]);"use strict";angular.module("theOneBlog.controllers").controller("indexArticlesCtrl",["$scope","$filter","indexArticlesService","headerHelp","indexList",function(a,b,c,d,e){d.resetAll();a.indexList=b("IndexArticlesWordlimit")(e)}]);"use strict";angular.module("theOneBlog.controllers").controller("indexCarouselCtrl",["$scope","carouselsService",function(a,b){a.slides=[];a.intervalTime=5e3;b.getIndexList().$promise.then(function(b){a.slides=b})}]);"use strict";angular.module("theOneBlog.controllers").controller("indexCtrl",["",function(){}]);"use strict";angular.module("theOneBlog.controllers").controller("mainCtrl",["$scope","headerHelp",function(a,b){b.init();a.useableLeave=true;a.pageClass="main"}]);"use strict";angular.module("theOneBlog.controllers").controller("searchCtrl",["$scope","$timeout","$filter","$stateParams","headerHelp","catesService","searchService",function(a,b,c,d,e,f,g){e.resetAll();var h=d.searchWord,i=[];a.containCates=[];a.pageClass="search";a.search={originList:[],resultList:[],keyWord:h};f.getAllCates().$promise.then(function(a){i=a});g.getListByKeyWord(h).$promise.then(function(b){a.search.originList=a.search.resultList=b;c("keyWordPoint")(b,h);a.containCates=c("cateContain")(b)});a.filterCate="";a.setFilter=function(b){var d=[];a.filterCate=b;if(a.search.originList.length>2){d=c("filter")(a.search.originList,b)}a.search.resultList=d}}]);